<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IfSpace - Cadastro</title>
    <link rel="stylesheet" href="styles/cadastro.css">
</head>
<body>
    <div class="container">
        <div class="register-card">
            <div class="header">
                <h1>IfSpace</h1>
                <h2>Criar Conta</h2>
                <p>É rápido e fácil</p>
            </div>
            
            <form class="register-form" id="registerForm">
                <div class="form-row">
                    <div class="form-group">
                        <input type="text" id="firstName" placeholder="Nome" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="lastName" placeholder="Sobrenome" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <input type="email" id="email" placeholder="Email" required>
                </div>
                
                <div class="form-group">
                    <input type="password" id="password" placeholder="Nova senha" required>
                </div>
                
                <!-- Campo de Upload de Foto de Perfil -->
                <div class="form-group">
                    <label for="profilePicture">Foto de Perfil (Opcional):</label>
                    <input type="file" id="profilePicture" accept="image/*">
                    <div id="profilePicturePreview" style="margin-top: 10px; text-align: center;">
                        <img id="imagePreview" src="https://via.placeholder.com/100?text=Pré-visualização" alt="Pré-visualização da Foto de Perfil" style="max-width: 100px; max-height: 100px; border-radius: 50%; object-fit: cover; border: 2px solid #ccc;">
                    </div>
                </div>
                
                <div class="form-group">
                    <input type="date" id="birthday" required>
                </div>
                
                <div class="form-group">
                    <select id="gender" required>
                        <option value="">Selecione o gênero</option>
                        <option value="masculino">Masculino</option>
                        <option value="feminino">Feminino</option>
                        <option value="outro">Outro</option>
                    </select>
                </div>
                
                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="terms" required>
                        <span class="checkmark"></span>
                        Eu aceito os <a href="#">Termos de Uso</a> e <a href="#">Política de Privacidade</a>
                    </label>
                </div>
                
                <!-- Divs para mensagens de erro e loading, criadas para o JavaScript -->
                <div id="errorMessage" style="color: red; font-weight: bold; margin-top: 10px; display: none;"></div>
                <div id="loadingState" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); color: white; font-size: 1.2em; display: flex; justify-content: center; align-items: center; z-index: 1000; flex-direction: column; display: none;">
                    <span id="loadingMessage">Carregando...</span>
                </div>

                <button type="submit" class="register-btn">Cadastrar</button>
                
                <div class="form-links">
                    <a href="index.html">Já tem uma conta? Faça login</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- === SNIPPET DO FIREBASE === -->
    <script type="module">
        console.log("-> Firebase snippet starting execution in cadastro.html.");
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
        import { getFirestore, collection, doc, setDoc } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js"; 
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDQ_hTliPlLpW2W6ACCoka1HD5So0K9b9Q",
            authDomain: "redeifspace.firebaseapp.com",
            projectId: "redeifspace",
            storageBucket: "redeifspace.firebasestorage.app",
            messagingSenderId: "237485490117",
            appId: "1:237485490117:web:6ad953ad50e6097cb7d5ac",
            measurementId: "G-JKRWBEBJKV"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // Torna as funções e objetos do Firebase globais para serem acessados pelo scripts/cadastro.js
        window.firebaseAuth = auth;
        window.firebaseCreateUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.firebaseFirestore = db;
        window.firebaseFirestoreCollection = collection;
        window.firebaseFirestoreDoc = doc;
        window.firebaseFirestoreSetDoc = setDoc;
        window.firebaseStorage = storage;
        window.firebaseStorageRef = ref;
        window.firebaseStorageUploadBytes = uploadBytes;
        window.firebaseStorageGetDownloadURL = getDownloadURL;
        window.firebaseTimestamp = { now: () => new Date() }; // Função simples para timestamp

        console.log("-> Firebase snippet finished execution in cadastro.html. Auth, Firestore and Storage available.");
    </script>

    <!-- === SEU SCRIPT EXTERNO DE CADASTRO.JS === -->
    <script type="module" src="scripts/cadastro.js"></script>
</body>
</html>




